#!/usr/bin/env bash

BUILD_DIR=$1
CACHE_DIR=$2

NODE_VERSION=v8.9.0
NODE_DIST=node-${NODE_VERSION}-linux-x64
NODE_TAR=${NODE_DIST}.tar.xz
NODE_URL="https://nodejs.org/dist/${NODE_VERSION}/${NODE_TAR}"

echo "Downloading node $NODE_VERSION..."
curl -sL ${NODE_URL} -o ${CACHE_DIR}/${NODE_TAR}

echo "Download complete, extracting downloaded content..."
tar xf ${CACHE_DIR}/${NODE_TAR}

echo "Installing node $NODE_VERSION"
mkdir -p ${BUILD_DIR}/bin
mv ${NODE_DIST} ${BUILD_DIR}/bin

${BUILD_DIR}/bin/${NODE_DIST}/node -v

exit 0